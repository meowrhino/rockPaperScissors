<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>rockPaperScissors!</title>
    <style>
        * {
            font-family: Georgia, 'Times New Roman', Times, serif;
        }

        .title {
            color: midnightblue;
        }

        .options {
            padding: 10px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .choice {
            font-size: 60px;
            padding: 10px 20px;
        }

        h1,
        h2 {
            text-align: center;
        }

        .results {
            margin: 20px 30px;
            padding: 10px 30px;
            border: 5px dashed indianred;
            text-align: center;
        }

        .lastRound {
            border: 5px dashed maroon;
            padding: 20px;
            margin: 20px 0px;
        }

        .score {
            border: 5px dashed teal;
            padding: 20px;
            margin: 20px 0px;
        }

        .victoryText {
            font-size: 20px;
            color: red;
            font-weight: bold;
        }

        .restartButton {
            margin: 10px;
            padding: 10px 20px;
        }
    </style>
</head>

<body>
    <div class="title">
        <h1>fight against a random choice</h1>
        <h2>what is the weapon of your choice?</h2>
    </div>

    <div class="options">
        <button class="choice" id="playerRock">üëä</button>
        <button class="choice" id="playerPaper">üñêÔ∏è</button>
        <button class="choice" id="playerScissors">‚úåÔ∏è</button>
    </div>
    <div class="results">
        <div class="lastRound">

        </div>
        <div class="score">

        </div>
        <div class="victoryText">

        </div>
    </div>
    <script>

        /*each button will activate the playRound function with the chosen argument*/
        const playerRock = document.querySelector("#playerRock");
        playerRock.addEventListener('click', () => {
            playRound("rock");
        });

        const playerPaper = document.querySelector("#playerPaper");
        playerPaper.addEventListener('click', () => {
            playRound("paper");
        });

        const playerScissors = document.querySelector("#playerScissors");
        playerScissors.addEventListener('click', () => {
            playRound("scissors");
        });



        /*the computer's choice is chosen via a random number between 1 and 3
        and then that number is converted into an option*/
        function getRandomInt(max) {
            return Math.floor(Math.random() * max + 1);
        };

        function getComputerChoice() {
            let number = getRandomInt(3);
            let choice;

            switch (number) {
                case 1:
                    choice = "rock";
                    break

                case 2:
                    choice = "paper";
                    break

                case 3:
                    choice = "scissors";
                    break
            }
            return choice
        }



        /*we create the variables for the results to be shown*/
        const results = document.querySelector(".results");
        const lastRound = document.querySelector(".lastRound");
        const score = document.querySelector(".score");
        const br = document.createElement("br");

        /*and also we create those variables for the game to save each round*/
        let computerVictories = 0;
        let playerVictories = 0;
        let ties;

        /*the game is a best of 5 so we want to show the winner of five 
        but just once, so we create a boolean that will activate once that is done
        so that the "if" will not print more than one*/
        let roundEnded = false;

        /*y ahora si han ganado mas de 5 rondas que se pueda reempezar el juego con un boton*/
        const restartButton = document.createElement('button');
        restartButton.setAttribute('class', 'restartButton');
        restartButton.textContent = '‚ôªÔ∏è';
        restartButton.addEventListener('click', () => {
            restartRound()
        });

        let veredict;

        const victoryText = document.querySelector(".victoryText");
        playerVictoryText = document.createTextNode('player is the üí•WINNERüí• of 5 rounds');
        computerVictoryText = document.createTextNode('computer is the üí•WINNERüí• of 5 rounds');


        function playRound(input) {
            const playerChoice = input;

            if (lastRound.childElementCount > 1) {
                lastRound.innerHTML = '';
            }

            const playerChoiceText = document.createTextNode(`player choice is ${playerChoice}`);
            lastRound.appendChild(playerChoiceText);
            lastRound.appendChild(br.cloneNode(true));



            const computerChoice = getComputerChoice();

            const computerChoiceText = document.createTextNode(`computer choice is ${computerChoice}`);
            lastRound.appendChild(computerChoiceText);
            lastRound.appendChild(br.cloneNode(true));



            /*we evaluate the results*/
            if (playerChoice === computerChoice) {
                veredict = "tie";

            } else if (playerChoice !== computerChoice) {

                switch (playerChoice) {
                    case "scissors":
                        if (computerChoice == "paper") {
                            veredict = "player win";
                        } else if (computerChoice == "rock") {
                            veredict = "computer win";
                        }
                        break

                    case "paper":
                        if (computerChoice == "rock") {
                            veredict = "player win";
                        } else if (computerChoice == "scissors") {
                            veredict = "computer win";
                        }
                        break

                    case "rock":
                        if (computerChoice == "scissors") {
                            veredict = "player win";
                        } else if (computerChoice == "paper") {
                            veredict = "computer win";
                        }
                        break

                }
            }

            /*we load the results into the variables we created*/
            if (veredict === "computer win") {
                computerVictories++;
            } else if (veredict === "player win") {
                playerVictories++;
            } else {
                ties++;
            }



            if (score.childElementCount > 1) {
                score.innerHTML = '';
            }

            /*generar los textos que se imprimir√°n en el div score*/

            const veredictText = document.createTextNode(`this round ended up in a ${veredict}`);
            const playerVictoriesText = document.createTextNode(`player has won ${playerVictories} times`)
            const computerVictoriesText = document.createTextNode(`computer has won ${computerVictories} times`)

            score.appendChild(veredictText);
            score.appendChild(br.cloneNode(true));
            score.appendChild(playerVictoriesText);
            score.appendChild(br.cloneNode(true));
            score.appendChild(computerVictoriesText);
            score.appendChild(br.cloneNode(true));


            if (playerVictories == 5 && roundEnded == false) {
                victoryText.appendChild(playerVictoryText);
                results.appendChild(restartButton);

                roundEnded = true;
            }

            if (computerVictories == 5 && roundEnded == false) {
                victoryText.appendChild(computerVictoryText);
                results.appendChild(restartButton);

                roundEnded = true;
            }
        }

        function restartRound() {
            ties = 0;
            computerVictories = 0;
            playerVictories = 0;

            lastRound.innerHTML = '';
            score.innerHTML = '';
            victoryText.innerHTML = '';

            roundEnded = false;
            results.removeChild(restartButton);
        }


    </script>

</body>

</html>
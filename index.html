<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>rockPaperScissors!</title>
</head>

<body>

    <script>

        /*we have to make the computer choose a random choice
        and for that we want to get an integer from 1 to 3 (1, 2 or 3)*/

        function getRandomInt(max) {
            return Math.floor(Math.random() * max + 1);
        };

        /*and then we assign a choice from rock paper scissors to the number obtained*/

        function getComputerChoice() {
            let number = getRandomInt(3);
            let choice;

            switch (number) {
                case 1:
                    choice = "rock";
                    break

                case 2:
                    choice = "paper";
                    break

                case 3:
                    choice = "scissors";
                    break
            }
            return choice
        }

        /*we prepare the variables we'll need for the round*/

        let computerChoice;
        let playerInput;
        let playerChoice;

        let veredict;

        function playRound(playerChoiceTest, computerChoiceTest) {

            /*we create an input for the player to introduce their choice
            and then another variable to convert the input into a simpler string
            so that ROCK, Rock and rock are all converted to "rock"*/

            /*we also call the function to get the computer's choice*/

            playerInput = prompt("choose your weapon of choice");
            playerChoice = playerInput.toLowerCase();
            console.log(`player choice is ${playerChoice}`);


            /*we have to check its a valid input*/
            if (playerChoice != 'rock' && playerChoice != 'paper' && playerChoice != 'rock') {
                console.log('verification started');
                while (playerChoice !== 'rock' && playerChoice !== 'paper' && playerChoice !== 'rock') {
                    playerInput = prompt("the input you submitted is not a valid one please choose between rock, paper or scissors");
                    playerChoice = playerInput.toLowerCase();

                    console.log('new player input is ' + playerChoice);
                }
            }

            computerChoice = getComputerChoice();
            console.log(`computer choice is ${computerChoice}`);

            /*we load the variables into the arguments of the function*/

            playerChoiceTest = playerChoice;
            computerChoiceTest = computerChoice;

            /*and we evaluate the results, we did the tie evaluation like this to save code*/

            if (playerChoice === computerChoice) {
                veredict = "tie";

            } else if (playerChoice !== computerChoice) {

                switch (playerChoice) {
                    case "scissors":
                        if (computerChoice == "paper") {
                            veredict = "player wins";
                        } else if (computerChoice == "rock") {
                            veredict = "computer wins";
                        }
                        break

                    case "paper":
                        if (computerChoice == "rock") {
                            veredict = "player wins";
                        } else if (computerChoice == "scissors") {
                            veredict = "computer wins";
                        }
                        break

                    case "rock":
                        if (computerChoice == "scissors") {
                            veredict = "player wins";
                        } else if (computerChoice == "paper") {
                            veredict = "computer wins";
                        }
                        break

                }
            }

            if (veredict === "computer wins") {
                computerVictories++;
            } else if (veredict === "player wins") {
                playerVictories++;
            } else {
                ties++;
            }

            console.log(veredict);
            console.log(" ");

            return veredict;
        }

        /*and we call the function*/

        /*
        playRound();
        console.log(veredict);
        */

        /*in case there was a tie, we created this for loop so that you cannot escape till a winner is chosen*/

        for (i = 0; i != 1; i) {
            if (veredict === "tie") {
                console.log("THERE WAS A FUCKING TIE");
                playRound();

            } else {
                i++;
            }
        }

        /*now we're going to try to make a "best of five"*/

        let computerVictories;
        let playerVictories;
        let ties;

        function game() {
            /*if (computerVictories < 3 || playerVictories < 3){}*/

            computerVictories = 0;
            playerVictories = 0;
            ties = 0;

            for (i = 1; i < 6; i++) {
                console.log("round " + i + ":")
                playRound();
            }

            while (playerVictories === computerVictories) {
                console.log("player and computer are tied we must repeat the final round!!!")
                playRound();
                console.log("now player has " + playerVictories + " wins")
                console.log("now computer has " + computerVictories + " wins")
            }

            /*we want to check if we did already a round 5 so that it doesnt print 2 times round 5*/


            if (computerVictories > playerVictories) {
                veredictFive = "computer wins best of five";
            } else if (playerVictories > computerVictories) {
                veredictFive = "player wins best of five";
            } else {
                veredictFive = "something happened";
            } /*!!nos hemos quedado aqui!!*/

            console.log('Veredict five is ' + veredictFive);
            console.log('Computer won ' + computerVictories + ' number of times');
            console.log('Player won ' + playerVictories + ' number of times');

        }

        game();


    </script>

</body>

</html>